<!DOCTYPE html>
<html lang="en-us">

<head>
	<meta charset="UTF-8">
	<title>Home Page</title>
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7"
	 crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS"
	 crossorigin="anonymous"></script>

	<!-- CSS -->
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.7/chosen.css">
	<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet">
	<!-- JS -->
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.7/chosen.jquery.js"></script>



	<style>
		body, html {
    		height: 100%;
		}

		#image{
			background-image: url("https://images.pexels.com/photos/1006321/pexels-photo-1006321.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940"); 
			/* Center and scale the image nicely */
			background-position: center;
			background-repeat: no-repeat;
			background-size: cover;
			opacity: .9;
		}

		h2 {
			font-family: 'Lobster', cursive;
			color: rgb(255, 238, 0);
			text-align: center;
			font-size: 50px;
			
		}

		h3, footer {
			font-family: 'Montserrat', sans-serif;
			color: rgb(202, 5, 5);

		}

		h4 {
			font-family: 'Montserrat', sans-serif;
			color: rgb(0, 0, 0);
		}
	</style>

</head>

<body>
	<div id="image">
		<div class="container">

			<h2 class="text-center">Survey Questions</h2>
			<hr>

			<h3><strong>About You</strong></h3>
			<h4>Name (Required)</h4>
			<input type="text" name="" id="name" class="form-control" required>

			<h4>Link to Photo Image (Required)</h4>
			<input type="text" name="" id="photo" class="form-control" required>

			<hr>

			<h3><strong>Question 1</strong></h3>
			<h4>Your mind is always buzzing with unexplored ideas and plans.</h4>
			<select data-placeholder="" class="chosen-select" id="q1">
				<option value=""></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>

			<h3><strong>Question 2</strong></h3>
			<h4>You love the outdoors</h4>
			<select data-placeholder="" class="chosen-select" id="q2">
				<option value=""></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>

			<h3><strong>Question 3</strong></h3>
			<h4>People say you're outgoing.</h4>
			<select data-placeholder="" class="chosen-select" id="q3">
				<option value=""></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>

			<h3><strong>Question 4</strong></h3>
			<h4>You love children</h4>
			<select data-placeholder="" class="chosen-select" id="q4">
				<option value=""></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>

			<h3><strong>Question 5</strong></h3>
			<h4>You are pet-friendly</h4>
			<select data-placeholder="" class="chosen-select" id="q5">
				<option value=""></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>

			<h3><strong>Question 6</strong></h3>
			<h4>You rather read a book than watch tv</h4>
			<select data-placeholder="" class="chosen-select" id="q6">
				<option value=""></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>

			<h3><strong>Question 7</strong></h3>
			<h4>People say you have no patience</h4>
			<select data-placeholder="" class="chosen-select" id="q7">
				<option value=""></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>

			<h3><strong>Question 8</strong></h3>
			<h4>You love helping others</h4>
			<select data-placeholder="" class="chosen-select" id="q8">
				<option value=""></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>

			<h3><strong>Question 9</strong></h3>
			<h4>People say you're extremely optimistic</h4>
			<select data-placeholder="" class="chosen-select" id="q9">
				<option value=""></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>

			<h3><strong>Question 10</strong></h3>
			<h4>You worry too much about the past</h4>
			<select data-placeholder="" class="chosen-select" id="q10">
				<option value=""></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>


			<br>
			<br>

			<button type="submit" class="btn btn-primary btn-lg btn-block" id="submit"> Submit</button>

			<hr>

			<footer class="footer">
				<div class="container">
					<p>
						<a href="#">API Friend List</a> |
						<a href="#">Github Repo</a>
					</p>
				</div>
			</footer>
		</div>
	</div>

	<!-- Modal -->
	<div id="resultsModal" class="modal fade" role="dialog">
		<div class="modal-dialog">

			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h2 class="modal-title"><strong>Best Match</strong></h2>
				</div>
				<div class="modal-body">
					<h2 id="matchName"></h2>
					<img id="matchImg" src="" alt="">
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				</div>
			</div>

		</div>
	</div>

	<script type="text/javascript">

		// Chosen CSS
		var config = {
			".chosen-select": {},
			".chosen-select-deselect": { allow_single_deselect: true },
			".chosen-select-no-single": { disable_search_threshold: 10 },
			".chosen-select-no-result": { no_results_text: "Oops, nothing found!" },
			".chosen-select-width": { width: "95%" }
		};
		for (var selector in config) {
			$(selector).chosen(config[selector]);
		}

		// capture form inputs
		$("#submit").on("click", function () {
			// Form Validation
			function validateForm() {
				var isValid = true;
				$(".form-control").each(function () {
					if ($(this).val() === "") {
						isValid = false;
					}
				});

				$(".chosen-select").each(function () {

					if ($(this).val() === "") {
						isValid = false;
					}
				});
				return isValid;
			}

			// if all required fields are filled
			if (validateForm()) {
				// create an object for the users data
				var userData = {
					name: $("#name").val().trim(),
					photo: $("#photo").val().trim(),
					scores: [
						$("#q1").val(),
						$("#q2").val(),
						$("#q3").val(),
						$("#q4").val(),
						$("#q5").val(),
						$("#q6").val(),
						$("#q7").val(),
						$("#q8").val(),
						$("#q9").val(),
						$("#q10").val()
					]
				};
				// console.log(userData);
				// grab the url of the website
				var currentURL = window.location.origin;

				// ajax post the data to the friends api
				$.post(currentURL + '/api/friends', userData, function (data) {
					// grab the result from the ajax post so that the best match's name and photo displayed
					$("#matchName").text(data.name);
					$("#matchImg").attr("src", data.photo);

					// show modal with the best match
					$("#resultsModal").modal("toggle");
					// alert("working");
				});
			} else {
				alert("Please enter all fields before submitting!");
			}
			return false;
		});
	</script>

</body>

</html>