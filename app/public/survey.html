<!DOCTYPE html>
<html lang="en-us">

<head>
	<meta charset="UTF-8">
	<title>Home Page</title>
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
	 crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
	 crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
	 crossorigin="anonymous"></script>

	<!-- CSS -->
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.7/chosen.css">

	<!-- JS -->
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.7/chosen.jquery.js"></script>



	<style>
		.glyphicon-user {
			color: red;
		}

		body {
			background: rgba(100, 192, 204, 0.5);
		}
	</style>

</head>

<body>

	<div class="container">

		<h2 class="text-center">Survey Questions</h2>
		<hr>
		
		<h3><strong>About You</strong></h3>
		<h4>Name (Required)</h4>
		<input type="text" name="" id="name" class="form-control" required>

		<h4>Link to Photo Image (Required)</h4>
		<input type="text" name="" id="photo" class="form-control" required>

		<hr>

		<h3><strong>Question 1</strong></h3>
		<h4>Your mind is always buzzing with unexplored ideas and plans.</h4>
		<select data-placeholder="" class="chosen-select" id="q1">
			<option value=""></option>
			<option value="1">1 (Stongly Disagree)</option>
			<option value="2">2</option>
			<option value="3">3</option>
			<option value="4">4</option>
			<option value="5">5 (Stongly Agree)</option>
		</select>

		<h3><strong>Question 2</strong></h3>
		<h4>You love the outdoors</h4>
		<select data-placeholder="" class="chosen-select" id="q2">
			<option value=""></option>
			<option value="1">1 (Stongly Disagree)</option>
			<option value="2">2</option>
			<option value="3">3</option>
			<option value="4">4</option>
			<option value="5">5 (Stongly Agree)</option>
		</select>

		<h3><strong>Question 3</strong></h3>
		<h4>People say you're outgoing.</h4>
		<select data-placeholder="" class="chosen-select" id="q3">
			<option value=""></option>
			<option value="1">1 (Stongly Disagree)</option>
			<option value="2">2</option>
			<option value="3">3</option>
			<option value="4">4</option>
			<option value="5">5 (Stongly Agree)</option>
		</select>

		<h3><strong>Question 4</strong></h3>
		<h4>You love children</h4>
		<select data-placeholder="" class="chosen-select" id="q4">
			<option value=""></option>
			<option value="1">1 (Stongly Disagree)</option>
			<option value="2">2</option>
			<option value="3">3</option>
			<option value="4">4</option>
			<option value="5">5 (Stongly Agree)</option>
		</select>

		<h3><strong>Question 5</strong></h3>
		<h4>You are pet-friendly</h4>
		<select data-placeholder="" class="chosen-select" id="q5">
			<option value=""></option>
			<option value="1">1 (Stongly Disagree)</option>
			<option value="2">2</option>
			<option value="3">3</option>
			<option value="4">4</option>
			<option value="5">5 (Stongly Agree)</option>
		</select>

		<h3><strong>Question 6</strong></h3>
		<h4>You rather read a book than watch tv</h4>
		<select data-placeholder="" class="chosen-select" id="q6">
			<option value=""></option>
			<option value="1">1 (Stongly Disagree)</option>
			<option value="2">2</option>
			<option value="3">3</option>
			<option value="4">4</option>
			<option value="5">5 (Stongly Agree)</option>
		</select>

		<h3><strong>Question 7</strong></h3>
		<h4>Your mind is always buzzing with unexplored ideas and plans.</h4>
		<select data-placeholder="" class="chosen-select" id="q7">
			<option value=""></option>
			<option value="1">1 (Stongly Disagree)</option>
			<option value="2">2</option>
			<option value="3">3</option>
			<option value="4">4</option>
			<option value="5">5 (Stongly Agree)</option>
		</select>

		<h3><strong>Question 8</strong></h3>
		<h4>Your mind is always buzzing with unexplored ideas and plans.</h4>
		<select data-placeholder="" class="chosen-select" id="q8">
			<option value=""></option>
			<option value="1">1 (Stongly Disagree)</option>
			<option value="2">2</option>
			<option value="3">3</option>
			<option value="4">4</option>
			<option value="5">5 (Stongly Agree)</option>
		</select>

		<h3><strong>Question 9</strong></h3>
		<h4>Your mind is always buzzing with unexplored ideas and plans.</h4>
		<select data-placeholder="" class="chosen-select" id="q9">
			<option value=""></option>
			<option value="1">1 (Stongly Disagree)</option>
			<option value="2">2</option>
			<option value="3">3</option>
			<option value="4">4</option>
			<option value="5">5 (Stongly Agree)</option>
		</select>

		<h3><strong>Question 10</strong></h3>
		<h4>Your mind is always buzzing with unexplored ideas and plans.</h4>
		<select data-placeholder="" class="chosen-select" id="q10">
			<option value=""></option>
			<option value="1">1 (Stongly Disagree)</option>
			<option value="2">2</option>
			<option value="3">3</option>
			<option value="4">4</option>
			<option value="5">5 (Stongly Agree)</option>
		</select>


		<br>
		<br>

		<button type="submit" class="btn btn-primary btn-lg btn-block" id="submit"> Submit</button>

		<hr>

		<footer class="footer">
			<div class="container">
				<p>
					<a href="#">API Friend List</a> |
					<a href="#">Github Repo</a>
				</p>
			</div>
		</footer>
	</div>

	<!-- Modal -->
	<div id="resultsModal" class="modal fade" role="dialog">
		<div class="modal-dialog">

			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
						<h2 class="modal-title"><strong>Best Match</strong></h2>
				</div>
				<div class="modal-body">
					<h2 id="matchName"></h2>
					<img id="matchImg" src="https://cdn-images-1.medium.com/max/1600/0*Ha306Isq8WasgrgW.png" alt="">
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				</div>
			</div>

		</div>
	</div>

	<script type="text/javascript">

		$(document).ready(function () {
			// capture form inputs
			$("#submit").on("click", function () {

				// Form Validation
				function validateForm() {
					var isValid = true;
					$(".form-control").each(function () {
						if ($(this).val() === "") {
							isValid = false;
						}
					});

					$(".chosen-select").each(function () {
						if ($(this).val() === "") {
							isValid = false;
						}
					});
					return isValid;
				}

				// if all required fields are filled
				if (validateForm()) {
					// create an object for the users data
					var userData = {
						name: $("#name").val(),
						photo: $("#photo").val(),
						scores: [
							$("#q1").val(),
							$("#q2").val(),
							$("#q3").val(),
							$("#q4").val(),
							$("#q5").val(),
							$("#q6").val(),
							$("#q7").val(),
							$("#q8").val(),
							$("#q9").val(),
							$("#q10").val()
						]
					};

					var currentURL = window.location.origin;

					// ajax post the data to the friends api
					$.post(currentURL + "/api/friends", userData, function (data) {

						// grab the result from the ajax post so that the best match's name and photo displayed
						$("#matchName").text(data.name);
						$("#matchImg").attr("src", data.photo);

						// show modal with the best match
						$("#resultsModal").modal("toggle");

					});
				} else {
					alert("Please fill out all fields before submitting!");
				}
				return false;
			});
		});

	</script>
</body>

</html>